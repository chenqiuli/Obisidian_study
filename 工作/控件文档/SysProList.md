##### 解决之前问题：
- 接口频繁请求，上一次被cancel：
![](Pasted%20image%2020250324140727.png)
- 缓存：搜索记录、滚动位置等
- 原来控件太乱，SysToolBar与SysList两个控件业务逻辑强关联，但被分成2个，业务代码需要额外维护多余变量去强耦在一起

##### 缓存实现机制：
1、列表页 → 详情页：记住搜索参数、列表数据、滚动位置，后退不请求列表接口，直接按照以往方式：history.push
2、列表页 → 编辑页：记住搜索参数，返回列表带上前一次搜索参数去请求列表接口。在编辑history.push前要reload?.()（目的是：假设先进的详情页后退再去编辑页，重刷接口）
3、列表页 → 新增页：记住搜索参数，返回列表带上前一次搜索参数去请求列表接口。组件内统一处理了，直接按照以往方式：history.push

##### 业务页面什么时候需要reload：
1、例如：重启、删除、移入黑名单等，都需要执行reload?.()，调用操作接口才会重刷列表接口

##### 注意事项：
1、正常来说，列表控件只是在列表使用，但是有些业务场景，也把整个列表控件放到SysModal中使用，这个时候，以防列表的缓存信息与弹窗内的缓存信息互串，弹窗也不需要缓存，因此请在查看页内使用的任何SysModal内添加上clearProListCache=false，不然从详情页后退就会重刷接口了。如需要缓存：不传destroyOnClose不会销毁dom，传destroyOnClose=true，每次 （马祖贤的优惠减免页面）
2、高级搜索内的都不需要配置filterOption，控件内会自动根据type改成对应的operator
- type = select/multiSelect：单选operator用=、多选operator用in
- type = dateRange：>= 、<=
- type = date：=
- type = text：=


##### bug：
- 1、从详情页回来，不能加载更多数据（页签一搜索”1“，滚动一点距离，去到详情页，再回退，这个时候接口的skip会从0开始，不希望从0开始）
- 2、删除的时候：没有调用汇总接口 ✅ 
- 3、从详情页回来，下拉刷新，参数没带进去 ✅
- 4、列表接口死循环：① 第一个状态栏搜索一个“1”让总数变少点，点击进去详情页，回来加载更多之后切换状态 ✅
- 5、编辑、新增的时候，回退第一次接口没有拿到params ✅ （原因出在SysList的hasMore，跟第一点冲突）

##### 业务需检查、调整：
1、调整在查看页内SysModal 的 clearProListCache要设置成false